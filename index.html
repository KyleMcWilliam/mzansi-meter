<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Mzansi Meter - The SA Guessing Game</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="assets/favicon.svg" type="image/svg+xml">
    <!-- Google Ads -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8118267122499622"
     crossorigin="anonymous"></script>
</head>
<body>
    <div id="loading-screen">
        <p>Getting the braai ready...</p>
        <!-- Optional: Add a CSS spinner animation here -->
    </div>
    <div id="game-container">
        <!-- Start Screen -->
        <div id="start-screen" class="screen active">

            <div class="start-header">
                <div class="utility-group">
                    <button id="theme-toggle-start" class="icon-button-small" aria-label="Toggle Theme">üåì</button>
                    <button id="mute-button-start" class="icon-button-small" aria-label="Toggle Sound">üîä</button>
                </div>
            </div>

            <div class="logo">
                <img src="assets/favicon.svg" alt="Mzansi Meter Logo" style="width: 64px; height: 64px; margin-bottom: 10px;">
                <h1>The<br><span>Mzansi</span><br>Meter</h1>
                <p>The SA Guessing Game</p>
            </div>

            <div id="daily-streak-badge" class="streak-display" style="display: none;">
                üî• <span id="streak-count">0</span> Day Streak
            </div>
            <div class="high-score-display">High Score: <span id="high-score-start">0</span></div>

            <div class="menu-buttons">
                <button id="start-button" class="action-button">Endless Mode</button>
                <button id="daily-challenge-button" class="action-button">Daily Challenge</button>
                <button id="leaderboard-button" class="action-button secondary">Leaderboard</button>
                <button id="how-to-play-button" class="action-button secondary">How to Play</button>
            </div>

            <div class="footer-note">
                üáøüá¶ How lekker is your local knowledge? üáøüá¶
                <div class="legal-links">
                    <a href="privacy.html" target="_blank">Privacy Policy</a>
                </div>
                <div class="seo-text">
                    <p>The Mzansi Meter is the ultimate South African guessing game! Test your knowledge of local prices, statistics, and fun facts. Can you guess if the real value is higher or lower? Play the Endless Mode for a high score or take on the Daily Challenge. It's free, fun, and purely South African.</p>
                </div>
            </div>
        </div>

        <!-- Game Screen -->
        <div id="game-screen" class="screen">
            <div class="game-header">
                <div id="lives-display">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</div>

                <div id="score-streak" style="text-align: right; line-height: 1.2;">
                    <div style="font-size: 1.1rem; font-weight: 900;"><span id="current-score">0</span> <span style="font-size: 0.8rem; font-weight: 400;">Score</span></div>
                    <div style="font-size: 0.9rem; opacity: 0.8;"><span id="current-streak">0</span> <span style="font-size: 0.7rem;">Streak</span></div>
                </div>

                <div class="utility-group game-controls">
                    <button id="game-leaderboard-button" class="icon-button-small" aria-label="Leaderboard">üèÜ</button>
                    <button id="theme-toggle-game" class="icon-button-small" aria-label="Toggle Theme">üåì</button>
                    <button id="mute-button-game" class="icon-button-small" aria-label="Toggle Sound">üîä</button>
                </div>
            </div>

            <div id="card">
                <div id="card-inner">
                    <div id="card-front">
                        <!-- Timer bar -->
                        <div id="timer-container">
                            <div id="timer-bar"></div>
                        </div>
                        <!-- Image container -->
                        <div id="question-image-container">
                            <img id="question-image" src="" alt="Question context image">
                        </div>
                        <div id="question-text"></div>
                        <div class="presented-value-container">
                            <div id="presented-value"></div>
                        </div>
                        <!-- Correct answer popup -->
                        <div id="answer-popup"></div>
                    </div>
                    <div id="card-back">
                         <div class="logo">
                            <h1>The<br><span>Mzansi</span><br>Meter</h1>
                        </div>
                    </div>
                </div>
            </div>
            <div id="buttons-container">
                <button id="higher-button" class="choice-button">Higher</button>
                <button id="lower-button" class="choice-button">Lower</button>
            </div>
        </div>

        <!-- End Screen -->
        <div id="end-screen" class="screen">
            <h2 id="final-score-title">Eish, you got it wrong!</h2>
            <div id="final-score-container">
                <p>Final Score</p>
                <div id="final-score">0</div>
            </div>
            <div id="graded-title-container">
                <p>"<span id="graded-title">Certified Saffa</span>"</p>
            </div>

            <!-- Ad Container -->
            <div id="ad-container">
                <small>Advertisement</small>
                <!-- MzansiMeter - EndScreen - Responsive -->
                <ins class="adsbygoogle"
                     style="display:block"
                     data-ad-client="ca-pub-8118267122499622"
                     data-ad-slot="4347906407"
                     data-ad-format="auto"
                     data-full-width-responsive="true"></ins>
                <script>
                     (adsbygoogle = window.adsbygoogle || []).push({});
                </script>
            </div>

             <!-- NEW: Answer Reveal Section -->
            <div id="answer-reveal-container">
                <p id="reveal-question-text"></p>
                <p>The correct answer was: <span id="reveal-correct-answer"></span></p>
            </div>
            <button id="share-button" class="action-button">Share Your Score</button>
            <button id="restart-button" class="action-button secondary">Play Again</button>
             <!-- NEW: High Score Input -->
            <div id="highscore-input-container" style="display: none;">
                <p>Congrats! You're on the leaderboard!</p>
                <input type="text" id="player-initials" placeholder="Enter Your 3 Initials" maxlength="3">
                <button id="submit-score-button" class="action-button">Submit</button>
            </div>
        </div>

        <!-- Leaderboard Screen -->
        <div id="leaderboard-screen" class="screen">
            <div id="leaderboard-header">
                <h2 id="leaderboard-title">Leaderboard</h2>
                <div id="leaderboard-toggle-buttons">
                    <button id="show-daily-leaderboard" class="action-button small">Today's</button>
                    <button id="show-all-time-leaderboard" class="action-button small secondary">All-Time</button>
                </div>
            </div>
            <ol id="leaderboard-list"></ol>
            <button id="back-to-start-button" class="action-button">Back</button>
        </div>

    </div>

    <!-- Audio Files -->
    <audio id="wrong-answer-hadeda" src="assets/hadeda_1.mp3" preload="auto"></audio>
    <audio id="wrong-answer-taxi" src="assets/taxi-hoot.mp3" preload="auto"></audio>
    <audio id="correct-answer-sound" src="assets/correct.mp3" preload="auto"></audio>
    <audio id="click-sound" src="assets/click.mp3" preload="auto"></audio>

    <canvas id="confetti-canvas" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 999;"></canvas>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/11.3.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/11.3.0/firebase-firestore-compat.js"></script>

    <!-- How to Play Modal -->
    <div id="how-to-play-modal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2>How to Play</h2>
            <p>A question and a value will be displayed. You have to guess if the actual answer is <strong>Higher</strong> or <strong>Lower</strong> than the value shown.</p>
            <p>Get as many right as you can in a row. One wrong guess and it's game over!</p>
            <p>Good luck, boet!</p>
        </div>
    </div>

    <div id="toast-container"></div>
    <script src="script.js"></script>
</body>
</html>